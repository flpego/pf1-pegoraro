<div class="register__form__container" [formGroup]="registerForm">
  <h4>Registrarse</h4>
  <form class="flex__column form__container" (submit)="onSubmit()">
    <mat-form-field>
      <mat-label>Nombre</mat-label>
      <input matInput formControlName="name" />
      <div
        *ngIf="
          UserNameControl?.invalid &&
          (UserNameControl?.dirty || UserNameControl?.touched)
        "
        class="alert"
      >
        <div *ngIf="UserNameControl?.errors?.['required']">
          El nombre es requerido
        </div>
      </div>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Apellido</mat-label>
      <input matInput formControlName="lastName" />
      <div
        *ngIf="
          UserLastNameControl?.invalid &&
          (UserLastNameControl?.dirty || UserLastNameControl?.touched)
        "
        class="alert"
      >
        <div *ngIf="UserLastNameControl?.errors?.['required']">
          El apellido es requerido
        </div>
      </div>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Nombre de usuario</mat-label>
      <input matInput formControlName="userName" />
      <div
        *ngIf="
          UserNameControl?.invalid &&
          (UserNameControl?.dirty || UserNameControl?.touched)
        "
        class="alert"
      >
        <div *ngIf="UserNameControl?.errors?.['required']">
          El nombre de usuario es requerido
        </div>
        <div *ngIf="UserNameControl?.errors?.['pattern']">Solo letras</div>
      </div>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Rol</mat-label>
      <mat-select formControlName="role">
        <mat-option value="STUDENT">Student</mat-option>
        <mat-option value="TEACHER">Teacher</mat-option>
        <mat-option value="ADMIN">ADMIN</mat-option>
      </mat-select>
      <div
        *ngIf="
          UserRoleControl?.invalid &&
          (UserRoleControl?.dirty || UserRoleControl?.touched)
        "
        class="alert"
      >
        <div *ngIf="UserRoleControl?.errors?.['required']">
          El rol es requerido
        </div>
      </div>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Contraseña</mat-label>
      <input
        matInput
        [type]="hide ? 'password' : 'text'"
        formControlName="password"
      />
      <button
        mat-icon-button
        matSuffix
        (click)="hide = !hide"
        [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hide"
      >
        <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
      </button>
      <div
        *ngIf="
          UserPasswordControl?.invalid &&
          (UserPasswordControl?.dirty || UserPasswordControl?.touched)
        "
        class="alert"
      >
        <div *ngIf="UserPasswordControl?.errors?.['required']">
          La contraseña es requerida
        </div>
        <div *ngIf="UserPasswordControl?.errors?.['minlength']">
          La contraseña debe tener al menos 6 caracteres
        </div>
      </div>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Confirmar contraseña</mat-label>
      <input
        matInput
        type="password"
        formControlName="passwordConfirm"
      />
      <div
        *ngIf="
          UserPasswordConfirmControl?.invalid &&
          (UserPasswordConfirmControl?.dirty || UserPasswordConfirmControl?.touched)
        "
        class="alert"
      >
        <div *ngIf="UserPasswordConfirmControl?.errors?.['required']">
          La confirmación de contraseña es requerida
        </div>
        <div *ngIf="registerForm.errors?.['mismatch']">
          Las contraseñas no coinciden
        </div>
      </div>
    </mat-form-field>
    <button type="submit" mat-flat-button>Registrarse</button>
  </form>
</div>

